<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>webmonome - basic</title>
    <style>
      canvas {
        height: 500px;
        width: 500px;
        max-width: 100%;
      }
    </style>
  </head>
  <body>
    <script type="module">
      import Monome from '../src/Monome.js';
      const monome = new Monome();
      window.monome = monome;

      // create a canvas grid (works immediately, no hardware needed)
      const grid = monome.createCanvasGrid();
      document.body.appendChild(grid.canvas);

      // connect button (optional â€” adds hardware mirroring)
      const btn = document.createElement('button');
      btn.innerHTML = 'connect';
      btn.addEventListener('click', async () => {
        await monome.connect();
        monome.getGridSize();
      });
      document.body.appendChild(btn);

      const all = document.createElement('button');
      all.innerHTML = 'all';
      all.addEventListener('click', () => monome.gridLedAll(true));
      document.body.appendChild(all);

      const clear = document.createElement('button');
      clear.innerHTML = 'clear';
      clear.addEventListener('click', () => monome.gridLedAll(false));
      document.body.appendChild(clear);

      const intensity = document.createElement('input');
      intensity.type = 'range';
      intensity.min = 0;
      intensity.max = 15;
      intensity.value = 15;
      intensity.addEventListener('input', () => {
        monome.gridLedIntensity(parseInt(intensity.value));
      });
      document.body.appendChild(intensity);

      // toggle LEDs on key press
      monome.on('gridKeyDown', ({ x, y }) => {
        monome.gridLed(x, y, true);
      });

      monome.on('gridKeyUp', ({ x, y }) => {
        monome.gridLed(x, y, false);
      });

      // log system events
      monome.on('getGridSize', data => console.log('grid size:', data));
      monome.on('query', data => console.log('query:', data));
      monome.on('getId', data => console.log('id:', data));
    </script>
  </body>
</html>
